[tool:pytest]
# pytest configuration for Terminal Access tests

# Test discovery patterns
python_files = test_*.py
python_classes = Test*
python_functions = test_*

# Test paths
testpaths = tests

# Coverage options
addopts =
    --verbose
    --cov=addon/globalPlugins
    --cov-report=term-missing
    --cov-report=html:htmlcov
    --cov-report=xml
    --strict-markers

# Coverage thresholds
[coverage:run]
source = addon/globalPlugins
omit =
    */tests/*
    */__init__.py

[coverage:report]
# Target: 70% overall coverage
fail_under = 70
precision = 2
show_missing = True
skip_covered = False

exclude_lines =
    # Standard pragma
    pragma: no cover

    # Don't complain about missing debug code
    def __repr__

    # Don't complain if tests don't hit defensive code
    raise AssertionError
    raise NotImplementedError

    # Don't complain if non-runnable code isn't run
    if __name__ == .__main__.:

    # Don't complain about abstract methods
    @abstract

[flake8]
max-line-length = 120
exclude =
    .git,
    __pycache__,
    build,
    dist,
    .eggs,
    *.egg-info,
    .tox,
    .venv,
    venv,
    htmlcov
ignore =
    # E501: line too long (handled by max-line-length)
    E501,
    # W503: line break before binary operator (conflicts with black)
    W503,
    # W191: indentation contains tabs (NVDA uses tabs per coding standards)
    W191,
    # E101: indentation contains mixed spaces and tabs (docstrings alignment)
    E101,
    # W504: line break after binary operator (PEP 8 allows both)
    W504,
    # W293: blank line contains whitespace (tabs on blank lines are acceptable)
    W293,
    # E128: continuation line under-indented for visual indent (style preference)
    E128,
    # E131: continuation line unaligned for hanging indent (style preference)
    E131

